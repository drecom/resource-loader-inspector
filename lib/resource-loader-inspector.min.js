!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["resource-loader-inspector"]=t():e["resource-loader-inspector"]=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t){e.inspector={contentLength:0,alreadyLoaded:!1},t()},o=function(e,t){e.inspector&&(e.inspector.alreadyLoaded=!!e.data),t()},s=function(e,t){e.inspector&&e.inspector.alreadyLoaded?t():(this.inspector&&this.inspector.summary.resourceCount++,t())},i=function(e,t){if(this.xhr){var n=this.xhr.getResponseHeader("Content-Length");if(n){var r=parseInt(n,10);if(e.inspector){if(e.inspector.alreadyLoaded)return void t();e.inspector.contentLength=r}this.inspector&&(this.inspector.summary.totalContentLength+=r),t()}else t()}else t()},c=function(e,t){var n=this;if(e.inspector&&e.inspector.alreadyLoaded)t();else if(!this.xhr){var r=new XMLHttpRequest;r.open("HEAD",e.url,!0),r.addEventListener("load",function(){var t=r.getResponseHeader("Content-Length");if(t){var o=parseInt(t,10);e.inspector&&(e.inspector.contentLength=o),n.inspector&&(n.inspector.summary.totalContentLength+=o)}},!1),r.send(),t()}},a=function(){function e(){}return e.attach=function(t,n){void 0===n&&(n=!0),t.inspector=e.defaultInspectorProperty,e.registerMiddlewares(t,n)},e.snapshot=function(e){var t={totalContentLength:0,resourceCount:0,contentLengthUnknown:0},n=Object.keys(e.resources);t.resourceCount=n.length;for(var r=0;r<t.resourceCount;r++){var o=e.resources[n[r]];if(o.inspector){var s=o.inspector.contentLength;void 0!==s?t.totalContentLength+=s:t.contentLengthUnknown++}else t.contentLengthUnknown++}return t},e.recollect=function(t,n){void 0===n&&(n=!0);var r=e.defaultInspectorProperty;t.inspector||(t.inspector=r);var o=r.summary,s=Object.keys(t.resources);o.resourceCount=s.length;for(var i=0;i<o.resourceCount;i++){var a=t.resources[s[i]];if(a.inspector){var u=a.inspector.contentLength;u?o.totalContentLength+=u:n?c.call(t,a,function(){}):o.contentLengthUnknown++}else o.contentLengthUnknown++}t.inspector.summary=o},Object.defineProperty(e,"defaultInspectorProperty",{get:function(){return{summary:{totalContentLength:0,resourceCount:0,contentLengthUnknown:0},hasMiddleware:!1}},enumerable:!0,configurable:!0}),e.registerMiddlewares=function(e,t){if(void 0===t&&(t=!0),!e.inspector)throw new Error("loader is not initialized");e.inspector.hasMiddleware||(e.pre(r),e.pre(o),e.use(i),e.use(s),t&&e.use(c),e.inspector.hasMiddleware=!0)},e}();t.default=a}])});